<html>
  <head>
    <title>Manipulating Tables with DDL</title>
    <link href="../../../../static/favicon.png" rel="icon" />
    <link href="../../../../static/favicon.png" rel="shortcut icon" />
    <link media="all" type="text/css" href="../../../../static/clojure.css" rel="stylesheet" />
    <link media="all" type="text/css" href="../../../../static/wiki.css" rel="stylesheet" />
    <link media="all" type="text/css" href="../../../../static/internal.css" rel="stylesheet" />
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a id="Logo" href="index.html"><img alt="Clojure" height="100" width="100" src="../../../../static/clojure-icon.gif" /></a>
	<h1><a title="page header title" id="page-header" href="index.html">JDBC-based SQL Interface</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <span class="toc-header"><span id="project-name">JDBC-based SQL Interface</span> <span id="version">0.0.7</span> API</span><br />
    <ul>
      <li><a class="wiki_link" href="../../../../index.html">Overview</a></li>
      <li><a class="wiki_link" href="../../../../api-index.html">API Index</a></li>
    </ul>
    
    
    <a href="../../../../http://clojure.org" class="wiki_link">Clojure Home</a>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div id="content_view" class="wiki wikiPage">
                <div id="right-sidebar"></div>
                <div id="content-tag"><html><body><h1>Manipulating Tables with DDL</h1>

<p>Currently you can create and drop tables using clojure.java.jdbc. To see how to manipulate data with SQL, see <a href="https://github.com/clojure/java.jdbc/blob/master/doc/clojure/java/jdbc/UsingSQL.md">Manipulating Data with SQL</a>.</p>

<h2>Creating a table</h2>

<p>To create a table, use <em>create-table</em> with the table name and a vector for each column spec. Currently, table-level specifications are not supported.</p>

<pre><code>(defn create-fruit
  "Create a table"
  []
  (sql/create-table
    :fruit
    [:name "varchar(32)" "PRIMARY KEY"]
    [:appearance "varchar(32)"]
    [:cost :int]
    [:grade :real]))
</code></pre>

<h2>Dropping a table</h2>

<p>To drop a table, use <em>drop-table</em> with the table name.</p>

<pre><code>(defn drop-fruit
  "Drop a table"
  []
  (try
    (sql/drop-table :fruit)
    (catch Exception _)))
</code></pre>

<h2>Accessing table metadata</h2>

<p>To retrieve the metadata for a table, you can operate on the connection itself. In future, functions may be added to make this easier.</p>

<pre><code>(defn db-get-tables
  "Demonstrate getting table info"
  []
  (sql/with-connection db
    (into []
          (sql/resultset-seq
           (-&gt; (sql/connection)
               (.getMetaData)
               (.getTables nil nil nil (into-array ["TABLE" "VIEW"])))))))
</code></pre>
</body></html></div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div style="text-align: center;" id="copyright">No copyright info </div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a title="Visit Tom Hickey's website." href="http://www.tomhickey.com">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>